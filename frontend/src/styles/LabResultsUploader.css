/* src/styles/LabResultsUploader.css */

/* ========= Positioning knobs (desktop) ========= */
:root {
    --lab-uploader-left: 16px;
    /* desktop floating offset – keep it high above footers */
    --lab-uploader-bottom: 260px;
    --lab-uploader-width: 320px;
    --lab-uploader-z: 80;
}

/* ========= Default floating uploader (desktop) ========= */
/* NOTE: this class is used when the uploader is placed as a floating card
   (e.g., in Chat.jsx). We'll hide this on mobile below. */
.lab-uploader {
    position: fixed;
    left: var(--lab-uploader-left);
    bottom: calc(var(--lab-uploader-bottom) + env(safe-area-inset-bottom, 0px));
    width: min(90vw, var(--lab-uploader-width));
    z-index: var(--lab-uploader-z);

    display: grid;
    gap: 12px;
    pointer-events: auto;
}

/* Card styles */
.dropzone {
    user-select: none;
    border: 2px dashed rgba(0, 0, 0, .18);
    border-radius: 14px;
    padding: 18px;
    background: rgba(255, 255, 255, .8);
    -webkit-backdrop-filter: blur(6px);
    backdrop-filter: blur(6px);
    cursor: pointer;
    transition:
        transform .12s ease,
        border-color .12s ease,
        background .12s ease,
        box-shadow .12s ease;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08), 0 2px 8px rgba(0, 0, 0, 0.06);
}

.dropzone.drag-over {
    border-color: rgba(0, 0, 0, .45);
    transform: translateY(-1px) scale(1.01);
    background: rgba(255, 255, 255, .92);
    box-shadow: 0 10px 28px rgba(0, 0, 0, 0.10), 0 3px 10px rgba(0, 0, 0, 0.08);
}

.dz-inner {
    display: grid;
    gap: 8px;
    justify-items: center;
    text-align: center;
}

/* Loader (animated dots) */
.loader {
    display: none;
    height: 16px;
    gap: 8px;
    align-items: center;
}

.loader.show {
    display: inline-flex;
}

.loader .dot {
    width: 9px;
    height: 9px;
    border-radius: 50%;
    background: rgba(0, 0, 0, .6);
    animation: bounce 1s infinite ease-in-out;
}

.loader .dot:nth-child(2) {
    animation-delay: .15s;
}

.loader .dot:nth-child(3) {
    animation-delay: .3s;
}

@keyframes bounce {

    0%,
    80%,
    100% {
        transform: translateY(0);
        opacity: .6;
    }

    40% {
        transform: translateY(-6px);
        opacity: 1;
    }
}

.status-label {
    font-weight: 600;
}

.hint {
    font-size: 12px;
    opacity: .7;
}

/* Extracted text box (when autoSend=false) */
.extracted textarea {
    width: 100%;
    min-height: 160px;
    resize: vertical;
    padding: 10px 12px;
    border-radius: 10px;
    border: 1px solid rgba(0, 0, 0, .12);
    background: rgba(255, 255, 255, .85);
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
}

.extracted-head {
    display: flex;
    align-items: center;
    gap: 8px;
}

.badge {
    font-size: 11px;
    padding: 2px 6px;
    border-radius: 999px;
    background: rgba(0, 0, 0, .08);
}

.send-btn {
    margin-top: 8px;
    padding: 10px 14px;
    border: 0;
    border-radius: 10px;
    background: #0a66c2;
    color: #fff;
    font-weight: 600;
    cursor: pointer;
}

.send-btn:hover {
    filter: brightness(1.05);
}

.error {
    color: #b00020;
    font-weight: 600;
    padding: 8px 10px;
    border-radius: 10px;
    background: rgba(176, 0, 32, .08);
}

/* ========= Dark mode polish ========= */
@media (prefers-color-scheme: dark) {
    .dropzone {
        border-color: rgba(255, 255, 255, .16);
        background: rgba(22, 22, 22, .7);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5), 0 2px 8px rgba(0, 0, 0, 0.4);
    }

    .dropzone.drag-over {
        background: rgba(30, 30, 30, .86);
    }

    .loader .dot {
        background: rgba(255, 255, 255, .8);
    }

    .badge {
        background: rgba(255, 255, 255, .12);
    }

    .extracted textarea {
        background: rgba(30, 30, 30, .75);
        border-color: rgba(255, 255, 255, .12);
        color: #fff;
    }
}

/* ========= MOBILE BEHAVIOR =========
   On mobile, HIDE any floating uploader instance (e.g. .lab-uploader used in pages).
   We'll ONLY show a compact uploader inside the hamburger menu.
*/
@media (max-width: 900px) {

    /* Hide floating uploader (e.g. Chat’s fixed card) */
    .lab-uploader {
        display: none !important;
    }

    /* If your page wraps the floating card with a helper container: hide it too. */
    .labs-uploader-fixed {
        display: none !important;
    }

    /* Show the embedded uploader INSIDE the nav drawer in compact form */
    .nav-mobile-uploader .lab-uploader-embedded {
        display: grid !important;
        position: static !important;
        width: 100% !important;
        z-index: auto !important;
    }

    /* Compact “dense” sizing for the embedded one */
    .nav-mobile-uploader .lab-uploader-embedded .dropzone {
        padding: 12px;
        border-radius: 12px;
    }

    .nav-mobile-uploader .lab-uploader-embedded .dz-inner {
        gap: 6px;
    }

    .nav-mobile-uploader .lab-uploader-embedded .loader .dot {
        width: 7px;
        height: 7px;
    }

    .nav-mobile-uploader .lab-uploader-embedded .status-label {
        font-size: 13px;
        font-weight: 500;
    }

    .nav-mobile-uploader .lab-uploader-embedded .hint {
        font-size: 11px;
    }
}