/* src/styles/MicClinicalNotesButton.css */

/* -------- Positioning tokens (tweak to sit near your "Record Case" button) -------- */
:root {
  --mic-left: clamp(24px, 10vw, 240px); /* center-left-ish */
  --mic-bottom: 96px;                   /* just above bottom controls */
  --mic-size: 76px;                     /* circle size */
  --mic-z: 1200;
}

/* -------- Floating circular FAB -------- */
.mic-notes-fab {
  position: fixed;
  left: var(--mic-left);
  bottom: var(--mic-bottom);
  width: var(--mic-size);
  height: var(--mic-size);
  z-index: var(--mic-z);

  border: none;
  outline: none;
  border-radius: 999px;
  cursor: pointer;
  background: transparent;
  padding: 0;
  -webkit-tap-highlight-color: transparent;

  display: grid;
  place-items: center;

  transition: transform 160ms ease, filter 160ms ease;
}

.mic-notes-fab:is(:hover, :focus-visible) {
  transform: translateY(-2px) scale(1.02);
  filter: drop-shadow(0 6px 18px rgba(0,0,0,0.25));
}

/* outer pulsing halo */
.mic-pulse-ring {
  position: absolute;
  inset: 0;
  border-radius: 999px;
  background: radial-gradient(ellipse at center, rgba(0,255,120,0.35), transparent 60%);
  opacity: 0;
  transform: scale(0.9);
  pointer-events: none;
}

/* core disc */
.mic-core {
  position: relative;
  width: 100%;
  height: 100%;
  border-radius: 999px;
  background:
    radial-gradient(120% 120% at 30% 20%, rgba(255,255,255,0.4), rgba(255,255,255,0.08) 60%),
    linear-gradient(180deg, rgba(255,255,255,0.2), rgba(255,255,255,0.06));
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  box-shadow:
    inset 0 1px 2px rgba(255,255,255,0.4),
    0 10px 28px rgba(0,0,0,0.25);
  display: grid;
  place-items: center;
  transition: background 220ms ease, box-shadow 220ms ease;
}

/* mic icon */
.mic-icon {
  width: 44%;
  height: 44%;
  color: #202a2f;
  opacity: 0.92;
  transition: transform 220ms ease, color 220ms ease;
}

/* tiny red LED dot (top-right) */
.mic-led {
  position: absolute;
  right: 12px;
  top: 12px;
  width: 10px;
  height: 10px;
  border-radius: 99px;
  background: #d14;
  box-shadow: 0 0 0 0 rgba(209, 20, 20, 0.6);
  opacity: 0;
  transform: scale(0.7);
}

/* ---------- States ---------- */
.mic-notes-fab.is-idle .mic-pulse-ring {
  animation: none;
}

.mic-notes-fab.is-recording .mic-pulse-ring {
  opacity: 1;
  animation: micPulse 1200ms ease-in-out infinite;
}

.mic-notes-fab.is-idle .mic-core {
  /* subtle glass when idle */
  background:
    radial-gradient(120% 120% at 30% 20%, rgba(255,255,255,0.55), rgba(255,255,255,0.1) 60%),
    linear-gradient(180deg, rgba(255,255,255,0.25), rgba(255,255,255,0.08));
}

.mic-notes-fab.is-recording .mic-core {
  /* bright green active gradient */
  background:
    radial-gradient(120% 120% at 30% 20%, rgba(70, 255, 150, 0.95), rgba(0, 180, 80, 0.85) 60%),
    linear-gradient(180deg, rgba(60, 255, 150, 0.85), rgba(0, 160, 70, 0.88));
  box-shadow:
    inset 0 1px 2px rgba(255,255,255,0.5),
    0 12px 28px rgba(0, 160, 70, 0.45),
    0 0 0 8px rgba(0, 200, 100, 0.15);
}

.mic-notes-fab.is-recording .mic-icon {
  color: #063d1d;
  transform: scale(1.06);
}

.mic-notes-fab.is-recording .mic-led {
  opacity: 1;
  animation: ledPulse 1800ms ease-in-out infinite;
  background: #ff2a2a;
}

/* Connecting shimmer */
.mic-notes-fab.is-connecting .mic-core {
  background:
    linear-gradient(135deg, rgba(255,255,255,0.55), rgba(255,255,255,0.25)) padding-box,
    linear-gradient(90deg, rgba(255,255,255,0.0), rgba(255,255,255,0.4), rgba(255,255,255,0.0)) border-box;
  animation: connectSheen 1200ms linear infinite;
}

/* ---------- Inline transcript HUD ---------- */
.mic-transcript-hud {
  position: fixed;
  left: calc(var(--mic-left) + 92px);
  bottom: calc(var(--mic-bottom) + 0px);
  width: clamp(260px, 28vw, 380px);
  max-height: 38vh;
  overflow: auto;
  z-index: calc(var(--mic-z) - 1);
  padding: 12px 14px;
  border-radius: 14px;
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  background: rgba(18, 24, 28, 0.55);
  color: #eef6ef;
  box-shadow: 0 10px 26px rgba(0,0,0,0.28);
  opacity: 0;
  transform: translateY(10px);
  pointer-events: none;
  transition: opacity 180ms ease, transform 180ms ease;
}

.mic-transcript-hud.show {
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}

.mic-transcript-hud .hud-title {
  font-weight: 700;
  font-size: 13px;
  letter-spacing: 0.3px;
  opacity: 0.9;
  margin-bottom: 6px;
}

.mic-transcript-hud .hud-body {
  font-size: 12.5px;
  line-height: 1.4;
  white-space: pre-wrap;
  word-wrap: break-word;
  opacity: 0.92;
}

/* ---------- Keyframes ---------- */
@keyframes micPulse {
  0%   { transform: scale(0.92); opacity: 0.25; }
  50%  { transform: scale(1.05); opacity: 0.5; }
  100% { transform: scale(0.92); opacity: 0.25; }
}

@keyframes ledPulse {
  0%   { box-shadow: 0 0 0 0 rgba(255,42,42,0.55); transform: scale(0.85); }
  70%  { box-shadow: 0 0 0 8px rgba(255,42,42,0.0); transform: scale(1.0); }
  100% { box-shadow: 0 0 0 0 rgba(255,42,42,0.0); transform: scale(0.85); }
}

@keyframes connectSheen {
  0% { box-shadow:
        inset 0 1px 2px rgba(255,255,255,0.5),
        0 10px 22px rgba(0,0,0,0.25),
        0 0 0 6px rgba(140, 200, 255, 0.08); }
  50% { box-shadow:
        inset 0 1px 2px rgba(255,255,255,0.6),
        0 12px 26px rgba(0,0,0,0.28),
        0 0 0 10px rgba(140, 200, 255, 0.14); }
  100% { box-shadow:
        inset 0 1px 2px rgba(255,255,255,0.5),
        0 10px 22px rgba(0,0,0,0.25),
        0 0 0 6px rgba(140, 200, 255, 0.08); }
}
