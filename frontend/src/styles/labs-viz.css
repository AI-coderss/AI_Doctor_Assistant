/* src/styles/labs-viz.css */

/* ---- Theme tokens ---- */
:root{
  --lab-green: #11a36a;
  --lab-yellow:#f6c445;
  --lab-red:   #e5484d;
  --lab-muted: rgba(0,0,0,.6);
  --lab-bg:    rgba(255,255,255,.6);
}

/* One lab line container */
.lab-row{
  display:grid;
  grid-template-columns: 1fr auto;
  gap:.75rem .75rem;
  align-items:center;
  padding:.6rem .75rem;
  border-radius:12px;
  backdrop-filter: blur(10px);
  background: var(--lab-bg);
  border:1px solid rgba(0,0,0,.06);
}

/* Left column = label + bar; right column = value */
.lab-main{
  display:grid;
  gap:.35rem;
}

/* Name + unit + range badges */
.lab-head{
  display:flex;
  flex-wrap:wrap;
  align-items:baseline;
  gap:.4rem .6rem;
  font-size:.92rem;
}
.lab-name{ font-weight:700; }
.lab-unit{ color:var(--lab-muted); font-weight:500; }
.lab-range{
  margin-left:auto;
  color:var(--lab-muted);
  font-size:.84rem;
}

/* Status chip (green / yellow / red) */
.lab-chip{
  display:inline-flex;
  align-items:center;
  gap:.4rem;
  padding:.2rem .55rem;
  border-radius:999px;
  font-size:.8rem;
  font-weight:700;
  letter-spacing:.02em;
  color:#111;
  background:#eee;
}
.lab-chip.green{ background:color-mix(in oklab, var(--lab-green) 25%, white); }
.lab-chip.yellow{ background:color-mix(in oklab, var(--lab-yellow) 25%, white); }
.lab-chip.red{ background:color-mix(in oklab, var(--lab-red) 25%, white); }

/* Right column value */
.lab-value{
  text-align:right;
  font-weight:800;
  font-size:1.05rem;
}

/* ---- Range bar with dot indicator ----
   Usage:
   <div class="range-wrap">
     <div class="range-bar status-green" style="--pos:0.42"></div>
     <div class="range-dot"></div>
   </div>
   - Set --pos to a number in [0,1] (we clamp in CSS).
   - Add one of: status-green | status-yellow | status-red to tint the halo.
*/
.range-wrap{
  position:relative;
  height:14px;
}
.range-bar{
  position:relative;
  width:100%;
  height:10px;
  margin-block:2px;
  border-radius:999px;
  overflow:hidden;
  /* Red | Yellow | Green | Yellow | Red */
  background:
    linear-gradient(
      to right,
      var(--lab-red) 0%,
      var(--lab-red) 15%,
      var(--lab-yellow) 15%,
      var(--lab-yellow) 35%,
      var(--lab-green) 35%,
      var(--lab-green) 65%,
      var(--lab-yellow) 65%,
      var(--lab-yellow) 85%,
      var(--lab-red) 85%,
      var(--lab-red) 100%
    );
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.08);
}

/* Black dot */
.range-dot{
  --pos: .5; /* fallback */
  position:absolute;
  top:50%;
  left: calc( clamp(0%, var(--pos)*100%, 100%) );
  transform: translate(-50%, -50%);
  width:12px;
  height:12px;
  border-radius:50%;
  background:#111;
  box-shadow:
    0 0 0 2px rgba(255,255,255,.9),
    0 6px 16px rgba(0,0,0,.18);
}

/* Subtle colored glow by status */
.status-green + .range-dot{ box-shadow:
  0 0 0 2px rgba(255,255,255,.9),
  0 0 0 6px color-mix(in oklab, var(--lab-green) 25%, transparent),
  0 8px 18px rgba(0,0,0,.2);
}
.status-yellow + .range-dot{ box-shadow:
  0 0 0 2px rgba(255,255,255,.9),
  0 0 0 6px color-mix(in oklab, var(--lab-yellow) 25%, transparent),
  0 8px 18px rgba(0,0,0,.2);
}
.status-red + .range-dot{ box-shadow:
  0 0 0 2px rgba(255,255,255,.9),
  0 0 0 6px color-mix(in oklab, var(--lab-red) 25%, transparent),
  0 8px 18px rgba(0,0,0,.2);
}

/* Compact variant (if you use dense mode) */
.lab-row.dense{
  padding:.45rem .6rem;
}
.lab-row.dense .lab-head{ font-size:.88rem; }
.lab-row.dense .lab-value{ font-size:.98rem; }
